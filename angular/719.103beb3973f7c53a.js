"use strict";(self.webpackChunkarchiprod=self.webpackChunkarchiprod||[]).push([[719],{719:(zt,$,l)=>{l.r($),l.d($,{AdminModule:()=>P});var p=l(6895),te=l(4065),ne=l(2106),M=l(3456),S=l(7579),f=l(2722),N=l(4004),v=l(5698),H=l(2350),e=l(4650),u=l(5938),V=l(2419),W=l(3639),ie=l(2340),oe=l(529);class h{constructor(n){this.http=n,this.mainUrl=ie.N.apiUrl+"/brands"}getAllBrands(n,t){return this.http.get(`${this.mainUrl}?size=${t}&page=${n}`)}getBrandsList(){return this.http.get(`${this.mainUrl}/list`)}getBrandById(){return this.http.get(this.mainUrl)}postBrand(n,t){const o=new FormData;return o.append("name",n.name),o.append("year",n.year.toString()),o.append("country",n.country),n.website&&o.append("website",n.website),o.append("image",t,n.name),this.http.post(this.mainUrl,o)}updateBrand(n,t){let o;return"object"==typeof t.logo?(o=new FormData,o.append("id",n),o.append("name",t.name),o.append("year",t.year.toString()),o.append("country",t.country),t.website&&o.append("website",t.website),o.append("image",t.logo,t.name)):o={id:n,name:t.name,year:t.year,country:t.country,website:t.website?t.website:null,logo:t.logo},this.http.put(`${this.mainUrl}/${n}`,o)}deleteBrand(n){return this.http.delete(`${this.mainUrl}/${n}`)}}h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275inject(oe.eN))},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"});var re=l(9646),ae=l(4968),de=l(5577),K=l(8505),ce=l(9300),le=l(4986),se=l(4482),L=l(5403),pe=l(8421);const Y={leading:!0,trailing:!1};var me=l(5963);function fe(i,n,t,o){const r=window&&!!window.document&&window.document.documentElement;let a=r&&n?window:t;if(i&&(a=i&&r&&"string"==typeof i?function he(i,n,t){return(t?window.document:n).querySelector(i)}(i,t.nativeElement,o):i,!a))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return a}function D(i){return i&&!i.firstChange}const xe={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},_e={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class ve{constructor(n=!0){this.vertical=n,this.propsMap=n?xe:_e}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function Pe(i){return["Window","global"].some(t=>Object.prototype.toString.call(i).includes(t))}function j(i,n){return i?n.document.documentElement:null}function G(i,n){const t=function Ee({container:i,isWindow:n,axis:t}){const{offsetHeightKey:o,clientHeightKey:r}=J(t);return X(i,n,o,r)}(n);return n.isWindow?function Me(i,n,t){const{axis:o,container:r,isWindow:a}=t,{offsetHeightKey:c,clientHeightKey:s}=J(o),g=i+Z(j(a,r),o,a),m=X(n.nativeElement,a,c,s),x=function we(i,n,t){const o=n.topKey();if(i.getBoundingClientRect)return i.getBoundingClientRect()[o]+Z(i,n,t)}(n.nativeElement,o,a)+m;return{height:i,scrolled:g,totalToScroll:x,isWindow:a}}(t,i,n):function Se(i,n,t){const{axis:o,container:r}=t;return{height:i,scrolled:r[o.scrollTopKey()],totalToScroll:r[o.scrollHeightKey()],isWindow:!1}}(t,0,n)}function J(i){return{offsetHeightKey:i.offsetHeightKey(),clientHeightKey:i.clientHeightKey()}}function X(i,n,t,o){if(isNaN(i[t])){const r=j(n,i);return r?r[o]:0}return i[t]}function Z(i,n,t){const o=n.pageYOffsetKey(),r=n.scrollTopKey(),a=n.offsetTopKey();return isNaN(window.pageYOffset)?j(t,i)[r]:i.ownerDocument?i.ownerDocument.defaultView[o]:i[a]}function Ie(i,n={down:0,up:0},t){let o,r;if(i.totalToScroll<=0)return!1;const a=i.isWindow?i.scrolled:i.height+i.scrolled;return t?(o=(i.totalToScroll-a)/i.totalToScroll,r=(n?.down?n.down:0)/10):(o=i.scrolled/(i.scrolled+(i.totalToScroll-a)),r=(n?.up?n.up:0)/10),o<=r}class Be{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,t){this.updateScrollPosition(n),this.updateTotalToScroll(t)}updateTriggeredFlag(n,t){t?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,t){return t?this.triggered.down===n:this.triggered.up===n}}function Ne(i){const{scrollContainer:n,scrollWindow:t,element:o,fromRoot:r}=i,a=function be({windowElement:i,axis:n}){return function Oe(i,n){const t=i.isWindow||n&&!n.nativeElement?n:n.nativeElement;return{...i,container:t}}({axis:n,isWindow:Pe(i)},i)}({axis:new ve(!i.horizontal),windowElement:fe(n,t,o,r)}),c=new Be({totalToScroll:G(o,a)}),g={up:i.upDistance,down:i.downDistance};return function Ve(i){let n=(0,ae.R)(i.container,"scroll");return i.throttle&&(n=n.pipe(function ue(i,n=le.z,t=Y){const o=(0,me.H)(i,n);return function ge(i,n=Y){return(0,se.e)((t,o)=>{const{leading:r,trailing:a}=n;let c=!1,s=null,g=null,m=!1;const x=()=>{g?.unsubscribe(),g=null,a&&(ee(),m&&o.complete())},R=()=>{g=null,m&&o.complete()},q=_=>g=(0,pe.Xf)(i(_)).subscribe((0,L.x)(o,x,R)),ee=()=>{if(c){c=!1;const _=s;s=null,o.next(_),!m&&q(_)}};t.subscribe((0,L.x)(o,_=>{c=!0,s=_,(!g||g.closed)&&(r?ee():q(_))},()=>{m=!0,(!(a&&c&&g)||g.closed)&&o.complete()}))})}(()=>o,t)}(i.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:a.container,throttle:i.throttle}).pipe((0,de.z)(()=>(0,re.of)(G(o,a))),(0,N.U)(m=>function De(i,n,t){const{scrollDown:o,fire:r}=function ke(i,n,t){const o=function Te(i,n){return i<n.scrolled}(i,n);return{fire:Ie(n,t,o),scrollDown:o}}(i,n,t);return{scrollDown:o,fire:r,stats:n}}(c.lastScrollPosition,m,g)),(0,K.b)(({stats:m})=>c.updateScroll(m.scrolled,m.totalToScroll)),(0,ce.h)(({fire:m,scrollDown:x,stats:{totalToScroll:R}})=>function ye(i,n,t){return!!(i&&n||!t&&n)}(i.alwaysCallback,m,c.isTriggeredScroll(R,x))),(0,K.b)(({scrollDown:m,stats:{totalToScroll:x}})=>{c.updateTriggeredFlag(x,m)}),(0,N.U)(je))}const z={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function je(i){const{scrollDown:n,stats:{scrolled:t}}=i;return{type:n?z.DOWN:z.UP,payload:{currentScrollPosition:t}}}let ze=(()=>{class i{constructor(t,o){this.element=t,this.zone=o,this.scrolled=new e.EventEmitter,this.scrolledUp=new e.EventEmitter,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:o,infiniteScrollDistance:r}){const a=D(t),c=D(o),s=D(r),g=!c&&!this.infiniteScrollDisabled||c&&!o.currentValue||s;(a||c||s)&&(this.destroyScroller(),g&&this.setup())}setup(){(function Ce(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=Ne({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.handleOnScroll(t))})}handleOnScroll({type:t,payload:o}){const r=t===z.DOWN?this.scrolled:this.scrolledUp;(function Ue(i){return i.observed??i.observers.length>0})(r)&&this.zone.run(()=>r.emit(o))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.NgZone))},i.\u0275dir=e.\u0275\u0275defineDirective({type:i,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[e.\u0275\u0275NgOnChangesFeature]}),i})(),Re=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({}),i})();function $e(i,n){1&i&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"Close Sidebar"),e.\u0275\u0275elementEnd())}function He(i,n){if(1&i&&e.\u0275\u0275element(0,"i",4),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275classMap(t.icon)}}function We(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}const Ke=function(i,n){return{"nav-opened":i,"nav-btn-selected":n}};function Le(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2)(1,"button",7),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.navigate(a.link))}),e.\u0275\u0275template(2,He,1,2,"i",8),e.\u0275\u0275template(3,We,2,1,"p",5),e.\u0275\u0275elementEnd()()}if(2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,Ke,o.sideBarOpened,t.selected))("disabled",t.selected),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.icon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.sideBarOpened)}}const Ye=function(i){return{"big-box":i}},Ge=function(i){return{"nav-opened":i}};class C{constructor(n){this.router=n,this.sideBarOpened=!1,this.arrowClass="fa-solid fa-chevron-right",this.navList=[{name:"Products",link:"/admin",icon:"fa-solid fa-chair",selected:!1},{name:"Categories",link:"/admin/categories",icon:"fa-solid fa-folder-open",selected:!1},{name:"Brands",link:"/admin/brands",icon:"fa-solid fa-tags",selected:!1},{name:"Users",link:"/admin/users",icon:"fa-solid fa-user-pen",selected:!1}]}ngOnInit(){this.navList.forEach(n=>n.selected=this.router.url===n.link)}openSideBar(){this.sideBarOpened=!this.sideBarOpened,this.arrowClass=this.sideBarOpened?"fa-solid fa-chevron-left":"fa-solid fa-chevron-right"}navigate(n){this.router.navigate([n])}}C.\u0275fac=function(n){return new(n||C)(e.\u0275\u0275directiveInject(M.F0))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["app-side-bar"]],decls:7,vars:10,consts:[[1,"side-bar-container",3,"ngClass"],[1,"side-bar-box"],[1,"nav-box"],[1,"nav-btn",3,"ngClass","click"],[1,"nav-icon"],[4,"ngIf"],["class","nav-box",4,"ngFor","ngForOf"],[1,"nav-btn",3,"ngClass","disabled","click"],["class","nav-icon",3,"class",4,"ngIf"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.\u0275\u0275listener("click",function(){return t.openSideBar()}),e.\u0275\u0275element(4,"i",4),e.\u0275\u0275template(5,$e,2,0,"p",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Le,4,7,"div",6),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,Ye,t.sideBarOpened)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,Ge,t.sideBarOpened)),e.\u0275\u0275advance(1),e.\u0275\u0275classMap(t.arrowClass),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.sideBarOpened),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.navList))},dependencies:[p.mk,p.sg,p.O5],styles:[".side-bar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;height:100%;color:var(--white);background:var(--black);border-top:1px solid var(--white);padding:0}.side-bar-container[_ngcontent-%COMP%]   .side-bar-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:32px 17px}.side-bar-container[_ngcontent-%COMP%]   .side-bar-box[_ngcontent-%COMP%]   .nav-box[_ngcontent-%COMP%]   .nav-opened[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:16px}.big-box[_ngcontent-%COMP%]{width:240px;justify-content:flex-start}.nav-btn[_ngcontent-%COMP%]{display:flex;width:100%;background:none;border:0;border-radius:18px;color:var(--white);cursor:pointer;transition:background-color .4s ease-in-out}.nav-btn[_ngcontent-%COMP%]:hover{background-color:var(--dark-grey)}.nav-btn[_ngcontent-%COMP%]:disabled{cursor:default;background:none}.nav-btn[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:18px;height:36px;width:36px;border:0;color:var(--white);background:none}.nav-btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:start;padding-right:16px}.nav-btn-selected[_ngcontent-%COMP%]{border-radius:0;border-bottom:1px solid var(--white)}"]});var B=l(2660),Je=l(5191);function Xe(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"div",25),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("- ",t.product.price.discount,"%")}}function Ze(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",11)(1,"label",8),e.\u0275\u0275text(2,"Width:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"p",9),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",t.product.dimensions.width," ",t.product.dimensions.measurementUnits,"")}}function Qe(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",11)(1,"label",8),e.\u0275\u0275text(2,"Depth:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"p",9),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",t.product.dimensions.depth," ",t.product.dimensions.measurementUnits,"")}}function qe(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",11)(1,"label",8),e.\u0275\u0275text(2,"Diameter:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"p",9),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",t.product.dimensions.diameter," ",t.product.dimensions.measurementUnits,"")}}function et(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function tt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function nt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",7)(1,"label",8),e.\u0275\u0275text(2,"Full price:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",27),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"currency"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind1(5,2,t.product.price.currency)," ",t.product.price.fullPrice,",00")}}class E{constructor(n,t,o){this.dialog=n,this.productService=t,this.snack=o,this.canEdit=!1}openEditProducts(){this.dialog.open(H.A,{width:"480px",data:{product:this.product,categories:this.categories,brands:this.brands,isEditing:!0}})}deleteProduct(){this.product.id&&this.productService.deleteProduct(this.product.id).pipe((0,v.q)(1)).subscribe(n=>{this.snack.openSnackBar(n.message,"success")})}}function it(i,n){if(1&i&&e.\u0275\u0275element(0,"app-product-item",8),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("product",t)("categories",o.categories)("brands",o.brands)("canEdit",!0)}}function ot(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",6),e.\u0275\u0275listener("scrolled",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onScroll())}),e.\u0275\u0275template(4,it,1,4,"app-product-item",7),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("You added ",t.totalElements," products"),e.\u0275\u0275advance(1),e.\u0275\u0275property("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("scrollWindow",!1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.products)}}E.\u0275fac=function(n){return new(n||E)(e.\u0275\u0275directiveInject(u.uw),e.\u0275\u0275directiveInject(W.M),e.\u0275\u0275directiveInject(B.c))},E.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["app-product-item"]],inputs:{product:"product",categories:"categories",brands:"brands",canEdit:"canEdit"},decls:75,vars:23,consts:[[1,"item-container"],[1,"item-image"],[1,"img",3,"src","alt"],["class","button-icon-box",4,"ngIf"],[1,"item-details"],[1,"info"],[1,"section"],[1,"item-box"],[1,"label"],[1,"item-text"],[1,"item-text","uppercase-text"],[1,"item-box","dimension-box"],["class","item-box dimension-box",4,"ngIf"],[1,"section","details-prod"],[1,"item-box","box-with-array"],[1,"tags-box"],["class","array-item",4,"ngFor","ngForOf"],[1,"item-text","red-text"],["class","item-box",4,"ngIf"],[1,"item-text","price-text"],[1,"button-icon-box"],[1,"btn-icon","btn-icon-white",3,"click"],[1,"fa-regular","fa-pen-to-square"],[1,"btn-icon","btn-icon-danger",3,"click"],[1,"fa-solid","fa-xmark"],[1,"icon-sale"],[1,"array-item"],[1,"price-text","full-price"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275element(2,"img",2),e.\u0275\u0275template(3,Xe,3,1,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e.\u0275\u0275text(9,"Category:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"p",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",7)(13,"label",8),e.\u0275\u0275text(14,"Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",9),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",7)(18,"label",8),e.\u0275\u0275text(19,"Brand:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"p",9),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",7)(23,"label",8),e.\u0275\u0275text(24,"Collection:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"p",10),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",7)(28,"label",8),e.\u0275\u0275text(29,"Code:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"p",10),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(32,"div",6)(33,"div",11)(34,"label",8),e.\u0275\u0275text(35,"Height:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"p",9),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(38,Ze,5,2,"div",12),e.\u0275\u0275template(39,Qe,5,2,"div",12),e.\u0275\u0275template(40,qe,5,2,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",13)(42,"div",7)(43,"label",8),e.\u0275\u0275text(44,"Shape:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"p",9),e.\u0275\u0275text(46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(47,"div",14)(48,"label",8),e.\u0275\u0275text(49,"Materials:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",15),e.\u0275\u0275template(51,et,2,1,"p",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",14)(53,"label",8),e.\u0275\u0275text(54,"Extras:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"div",15),e.\u0275\u0275template(56,tt,2,1,"p",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(57,"div",6)(58,"div",7)(59,"label",8),e.\u0275\u0275text(60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"p",17),e.\u0275\u0275text(62),e.\u0275\u0275pipe(63,"currency"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(64,nt,6,4,"div",18),e.\u0275\u0275elementStart(65,"div",7)(66,"label",8),e.\u0275\u0275text(67,"In stock:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"p",19),e.\u0275\u0275text(69),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(70,"div",20)(71,"button",21),e.\u0275\u0275listener("click",function(){return t.openEditProducts()}),e.\u0275\u0275element(72,"i",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"button",23),e.\u0275\u0275listener("click",function(){return t.deleteProduct()}),e.\u0275\u0275element(74,"i",24),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("src",t.product.imagePath,e.\u0275\u0275sanitizeUrl)("alt",t.product.brand+t.product.details.materials[0]+t.product.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.product.price.isOnSale),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(t.product.category),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.product.type),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.product.brand),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.product.details.collectionName),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.product.details.productCode),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate2("",t.product.dimensions.height," ",t.product.dimensions.measurementUnits,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.product.dimensions.width),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.product.dimensions.depth),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.product.dimensions.diameter),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.product.details.shape),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.product.details.materials),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.product.details.extras),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.product.price.isOnSale?"Sale price:":"Full price:"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind1(63,21,t.product.price.currency)," ",t.product.price.isOnSale?t.product.price.discountedPrice:t.product.price.fullPrice,",00"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.product.price.isOnSale),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.product.inStock))},dependencies:[p.sg,p.O5,Je.H],styles:[".item-container[_ngcontent-%COMP%]{display:flex;padding:12px;gap:12px;width:100%}.item-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{position:relative;width:140px;height:140px}.item-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:140px}.item-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   .button-icon-box[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px}.item-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   .button-icon-box[_ngcontent-%COMP%]   .icon-sale[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:18px;width:34px;border-radius:9px;background:var(--danger);font-size:10px}.item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{display:flex;width:100%;gap:24px}.item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;gap:24px;width:100%}.item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:8px;border-right:2px solid var(--light-grey)}.item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details-prod[_ngcontent-%COMP%]{width:100%}.item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .button-icon-box[_ngcontent-%COMP%]{display:flex;padding:12px 12px 0 0;gap:6px}.item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .button-icon-box[_ngcontent-%COMP%]   .btn-icon-white[_ngcontent-%COMP%]{border:2px solid var(--light-grey)}.item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .button-icon-box[_ngcontent-%COMP%]   .btn-icon-white[_ngcontent-%COMP%]:hover{border:2px solid var(--accent)}.item-box[_ngcontent-%COMP%]{display:flex}.item-box[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{width:160px;font-size:14px;text-align:start;color:var(--grey)}.item-box[_ngcontent-%COMP%]   .price-text[_ngcontent-%COMP%], .item-box[_ngcontent-%COMP%]   .red-text[_ngcontent-%COMP%]{width:110px}.item-box[_ngcontent-%COMP%]   .red-text[_ngcontent-%COMP%]{color:var(--danger)}.item-box[_ngcontent-%COMP%]   .full-price[_ngcontent-%COMP%]{font-size:14px;text-decoration:line-through}.item-box[_ngcontent-%COMP%]   .tags-box[_ngcontent-%COMP%]{display:flex;gap:6px}.item-box[_ngcontent-%COMP%]   .tags-box[_ngcontent-%COMP%]   .array-item[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;padding:0 10px;border-radius:12px;background-color:var(--accent)}.dimension-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:100px}.dimension-box[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{width:90px;font-size:14px;text-align:start;color:var(--grey)}.label[_ngcontent-%COMP%]{width:120px;text-align:start;font-weight:700;font-size:16px}.box-with-array[_ngcontent-%COMP%]{margin-bottom:12px}.box-with-array[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0}@media only screen and (max-width: 1600px){.item-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:120px;height:120px}.item-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:120px}}"]});class w{constructor(n,t,o,r){this.dialog=n,this.categoryService=t,this.productService=o,this.brandService=r,this.products=[],this.categories=[],this.menuOpened=!1,this.totalElements=0,this.page=1,this.pageSize=6,this.destroy$=new S.x}ngOnInit(){this.getProducts(),this.getCategories(),this.getBrands()}getProducts(){this.productService.getProducts(this.page,this.pageSize).pipe((0,f.R)(this.destroy$)).subscribe(n=>{const t=n.data.map(o=>({...o,id:o._id})).map(({_id:o,...r})=>r);this.products=this.page?this.products.concat(t):t,this.totalElements=n.totalElements})}getCategories(){this.categoryService.getAllCategories().pipe((0,N.U)(n=>n.data.map(t=>({id:t._id,name:t.name,type:t.type}))),(0,f.R)(this.destroy$)).subscribe(n=>{n.forEach(t=>{const o=t.name.toLowerCase();t.link="/shop/"+o}),this.categories=n})}getBrands(){this.brandService.getAllBrands(1,this.pageSize).pipe((0,f.R)(this.destroy$)).subscribe(n=>{const t=n.data.map(o=>({...o,id:o._id})).map(({_id:o,...r})=>r);this.brands=t})}openAddProducts(){this.dialog.open(H.A,{width:"480px",data:{categories:this.categories,brands:this.brands}}).afterClosed().pipe((0,v.q)(1)).subscribe(()=>{this.productService.getProducts(1,this.pageSize)})}openCloseMenu(){this.menuOpened=!this.menuOpened}onScroll(){this.page+=1,this.getProducts()}}w.\u0275fac=function(n){return new(n||w)(e.\u0275\u0275directiveInject(u.uw),e.\u0275\u0275directiveInject(V.H),e.\u0275\u0275directiveInject(W.M),e.\u0275\u0275directiveInject(h))},w.\u0275cmp=e.\u0275\u0275defineComponent({type:w,selectors:[["app-admin-products"]],decls:9,vars:1,consts:[[1,"admin-container"],[1,"products-container"],[1,"products-header"],[1,"btn","btn-accent",3,"click"],["class","prod-section",4,"ngIf"],[1,"prod-section"],["infiniteScroll","",1,"products-box",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","item",3,"product","categories","brands","canEdit",4,"ngFor","ngForOf"],[1,"item",3,"product","categories","brands","canEdit"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-side-bar"),e.\u0275\u0275elementStart(2,"div",1)(3,"div",2)(4,"h2"),e.\u0275\u0275text(5,"Products"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return t.openAddProducts()}),e.\u0275\u0275text(7,"Add Product"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,ot,5,5,"div",4),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.products))},dependencies:[p.sg,p.O5,ze,C,E],styles:[".admin-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100vh;overflow-y:hidden;overflow-x:hidden;padding-top:70px;background:var(--light-grey)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:calc(100vh - 70px);padding:24px;gap:24px}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px;border-radius:6px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 231px);border-radius:6px;padding:24px;gap:24px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;margin-bottom:0}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   .products-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow-y:scroll;overflow-x:hidden;gap:24px}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   .products-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;width:100%;border:2px solid var(--light-grey);border-radius:6px}.btn-gear[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;width:44px;height:44px}.menu-container[_ngcontent-%COMP%]{top:172px;right:55px;z-index:12}"]});var rt=l(3578);class I{deleteUser(){}}function at(i,n){1&i&&e.\u0275\u0275element(0,"app-user-card",7),2&i&&e.\u0275\u0275property("user",n.$implicit)}I.\u0275fac=function(n){return new(n||I)},I.\u0275cmp=e.\u0275\u0275defineComponent({type:I,selectors:[["app-user-card"]],inputs:{user:"user"},decls:8,vars:2,consts:[[1,"user-container"],[1,"id"],[1,"btn","btn-icon-danger",3,"click"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"p",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"p"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div")(6,"button",2),e.\u0275\u0275listener("click",function(){return t.deleteUser()}),e.\u0275\u0275text(7," Delete "),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.user._id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.user.email))},styles:[".user-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.user-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:start;font-size:16px}.user-container[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{width:280px}"]});class T{constructor(n){this.authService=n,this.pageSize=8,this.destroy$=new S.x}ngOnInit(){this.getUsers()}getUsers(){this.authService.getUsers(1,this.pageSize).pipe((0,f.R)(this.destroy$)).subscribe(n=>{this.users=n.data})}}T.\u0275fac=function(n){return new(n||T)(e.\u0275\u0275directiveInject(rt.e))},T.\u0275cmp=e.\u0275\u0275defineComponent({type:T,selectors:[["app-users"]],decls:14,vars:1,consts:[[1,"admin-container"],[1,"products-container"],[1,"products-header"],[1,"users-box"],[1,"users-header"],[1,"users-body"],["class","user-cards",3,"user",4,"ngFor","ngForOf"],[1,"user-cards",3,"user"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-side-bar"),e.\u0275\u0275elementStart(2,"div",1)(3,"div",2)(4,"h1"),e.\u0275\u0275text(5,"Users"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",3)(7,"div",4)(8,"h3"),e.\u0275\u0275text(9,"User id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"h3"),e.\u0275\u0275text(11,"Email"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",5),e.\u0275\u0275template(13,at,1,1,"app-user-card",6),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275advance(13),e.\u0275\u0275property("ngForOf",t.users))},dependencies:[p.sg,C,I],styles:[".admin-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100vh;padding-top:70px;background:var(--light-grey)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{width:100%}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:24px;padding:18px;border-radius:6px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .users-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin:24px;padding:24px 18px;border-radius:6px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .users-box[_ngcontent-%COMP%]   .users-header[_ngcontent-%COMP%]{display:flex;padding-left:16px;padding-bottom:12px;gap:190px}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .users-box[_ngcontent-%COMP%]   .users-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .users-box[_ngcontent-%COMP%]   .users-body[_ngcontent-%COMP%]   .user-cards[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;width:100%;border:2px solid var(--light-grey);border-radius:6px}h1[_ngcontent-%COMP%]{font-size:46px}"]});var d=l(4006),U=l(8324),dt=l(7855),ct=l(4385),lt=l(3238),Q=l(5631),st=l(2602);function pt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275element(1,"img",28),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.getControl("image").value,e.\u0275\u0275sanitizeUrl)}}function gt(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"image-cropper",29),e.\u0275\u0275listener("imageCropped",function(r){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.imageCropped(r))})("loadImageFailed",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.loadImageFailed())}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",6/7)("resizeToWidth",300)}}function mt(i,n){if(1&i&&e.\u0275\u0275element(0,"app-input-error",33),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("validator",t.getControl("name"))}}function ut(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",13)(1,"p"),e.\u0275\u0275text(2,"Category"),e.\u0275\u0275elementStart(3,"span",14),e.\u0275\u0275text(4,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"input",30),e.\u0275\u0275elementStart(6,"span",31),e.\u0275\u0275template(7,mt,1,1,"app-input-error",32),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("placeholder","Enter category*"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.getControl("name").touched&&t.getControl("name").invalid)}}function ft(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"mat-option",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function ht(i,n){if(1&i&&e.\u0275\u0275element(0,"app-input-error",33),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("validator",t.getControl("name"))}}function Ct(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",13)(1,"p"),e.\u0275\u0275text(2,"Category"),e.\u0275\u0275elementStart(3,"span",14),e.\u0275\u0275text(4,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",15)(6,"mat-select",34),e.\u0275\u0275template(7,ft,2,2,"mat-option",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"span",31),e.\u0275\u0275template(9,ht,1,1,"app-input-error",32),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.categories),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.getControlInvalid("name"))}}function xt(i,n){if(1&i&&e.\u0275\u0275element(0,"app-input-error",33),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("validator",t.getControl("typeName"))}}function _t(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275element(1,"input",36),e.\u0275\u0275elementStart(2,"span",31),e.\u0275\u0275template(3,xt,1,1,"app-input-error",32),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("placeholder","Enter type name*"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.getControlInvalid("typeName"))}}function vt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"mat-option",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.typeName),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.typeName)}}function yt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",13)(1,"div",15)(2,"mat-select",37),e.\u0275\u0275template(3,vt,2,2,"mat-option",17),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.types)}}function bt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"mat-option",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Ot(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",38),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.removeItem(a,c.getControl("materials")))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"i",2),e.\u0275\u0275elementEnd()}if(2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function Pt(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",38),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.removeItem(a,c.getControl("shapes")))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"i",2),e.\u0275\u0275elementEnd()}if(2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function Mt(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",38),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.removeItem(a,c.getControl("extras")))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"i",2),e.\u0275\u0275elementEnd()}if(2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function St(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView("category"===r.dialogName?r.addCategory():r.addType())}),e.\u0275\u0275text(1,"Submit"),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",t.categoryForm.invalid)}}function Et(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.editType())}),e.\u0275\u0275text(1,"Save"),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",t.categoryForm.invalid)}}class k{constructor(n,t,o,r,a){this.categoryService=n,this.data=t,this.dialogRef=o,this.fb=r,this.snack=a,this.categories=[],this.types=[],this.brands=[],this.imageChangedEvent="",this.editImage="",this.dialogTitle="",this.dialogName="",this.isEditing=!1,this.id="",this.destroy$=new S.x}ngOnInit(){this.item=new d.NI(""),this.newMaterial=new d.NI(""),this.newShape=new d.NI(""),this.newExtras=new d.NI(""),this.data&&(this.dialogName="category",this.brands=this.data.brands,this.isEditing=this.data.isEditing,this.initCategoryForm())}initCategoryForm(){this.categoryForm=this.fb.group({name:new d.NI("",d.kI.required),typeName:new d.NI({value:"",disabled:!!this.isEditing},[d.kI.required,d.kI.minLength(2),d.kI.maxLength(70)]),brands:new d.NI({value:[],disabled:!!this.isEditing},d.kI.required),materials:new d.NI({value:[],disabled:!!this.isEditing},d.kI.required),shapes:new d.NI({value:[],disabled:!!this.isEditing},d.kI.required),extras:new d.NI({value:["no extras"],disabled:!!this.isEditing},d.kI.required)}),"type"===this.dialogName&&(this.getControl("name").valueChanges.subscribe(n=>{const t=this.categories.find(o=>o.name===n);"string"==typeof t?.id&&(this.id=t?.id,this.isEditing&&(this.getCategoryTypes(),this.resetDetails()))}),this.isEditing&&this.getControl("typeName").valueChanges.subscribe(n=>{const t=this.types.find(o=>o.typeName===n);this.getControl("brands").setValue(t?.brands),this.getControl("materials").setValue(t?.materials),this.getControl("shapes").setValue(t?.shapes),this.getControl("extras").setValue(t?.extras),this.getControl("brands").enable(),this.getControl("materials").enable(),this.getControl("shapes").enable(),this.getControl("extras").enable()}))}getControl(n){return this.categoryForm.get(n)}getControlInvalid(n){return this.getControl(n).touched&&this.getControl(n).invalid}getCategoryTypes(){this.categoryService.getCategoryById(this.id).pipe((0,v.q)(1)).subscribe(n=>{this.types=n.data.type,this.getControl("typeName").enable()})}resetDetails(){}addItem(n,t){if(t.value){const r=[...this.getControl(n).value,t.value];this.getControl(n).setValue(r),t.setValue("")}}removeItem(n,t){if(t.value){const r=t.value.filter(a=>a!==n);t.setValue(r)}}onImagePicked(n){this.imageChangedEvent=n,this.getControl("image").setValue(this.imageChangedEvent)}imageCropped(n){this.categoryImage=this.base64ToFile(n.base64,this.imageChangedEvent?.target?.files[0].name)}base64ToFile(n,t){const o=n.split(","),r=o[0].match(/:(.*?);/)[1],a=atob(o[1]);let c=a.length,s=new Uint8Array(c);for(;c--;)s[c]=a.charCodeAt(c);return new File([s],t,{type:r})}loadImageFailed(){this.snack.openSnackBar("Load image is filed","error")}addCategory(){this.categoryForm.valid&&this.categoryService.addCategory(this.categoryForm.value,this.categoryImage).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.snack.openSnackBar("You added new category!","success"),this.dialogRef.close()})}addType(){this.categoryForm.valid&&this.categoryService.addType(this.categoryForm.value,this.id).pipe((0,f.R)(this.destroy$)).subscribe(n=>{this.dialogRef.close()})}editType(){this.categoryForm.valid&&(this.getControl("typeName"),this.categoryService.editType(this.categoryForm.value,this.id).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.dialogRef.close()}))}}k.\u0275fac=function(n){return new(n||k)(e.\u0275\u0275directiveInject(V.H),e.\u0275\u0275directiveInject(u.WI),e.\u0275\u0275directiveInject(dt.zj),e.\u0275\u0275directiveInject(d.qu),e.\u0275\u0275directiveInject(B.c))},k.\u0275cmp=e.\u0275\u0275defineComponent({type:k,selectors:[["app-add-edit-category"]],features:[e.\u0275\u0275ProvidersFeature([U.G])],decls:63,vars:17,consts:[[1,"dialog-container"],["mat-dialog-close","","type","button",1,"btn-close"],[1,"fa-solid","fa-xmark"],["mat-dialog-content","",1,"dialog-body"],[1,"add-container"],[1,"add-form",3,"formGroup"],["class","img-preview",4,"ngIf"],[1,"prod-image-box","width-100"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","imageCropped","loadImageFailed",4,"ngIf"],[1,"btn","btn-line","width-100",3,"click"],["type","file","hidden","",3,"change"],["filePicker",""],["class","input-container",4,"ngIf"],[1,"input-container"],[1,"error-color"],[1,"input","input-accent-lined","width-100"],["formControlName","brands","multiple","","placeholder","Select brands*"],[3,"value",4,"ngFor","ngForOf"],[1,"list-box"],["class","list",3,"click",4,"ngFor","ngForOf"],[1,"input","input-accent-lined-with-icon","width-100"],["placeholder","Enter materials*","required","",1,"input-with-icon",3,"formControl"],[1,"input-btn",3,"click"],[1,"fa-solid","fa-circle-plus"],["placeholder","Enter shapes*","required","",1,"input-with-icon",3,"formControl"],["placeholder","Enter extras*","required","",1,"input-with-icon",3,"formControl"],["class","btn btn-accent width-100",3,"disabled","click",4,"ngIf"],[1,"img-preview"],[3,"src"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","imageCropped","loadImageFailed"],["formControlName","name",1,"input","input-accent-lined","width-100",3,"placeholder"],[1,"error-box"],[3,"validator",4,"ngIf"],[3,"validator"],["formControlName","name","placeholder","Select category*"],[3,"value"],["formControlName","typeName",1,"input","input-accent-lined","width-100",3,"placeholder"],["formControlName","typeName","placeholder","Select category*"],[1,"list",3,"click"],[1,"btn","btn-accent","width-100",3,"disabled","click"]],template:function(n,t){if(1&n){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",1),e.\u0275\u0275element(5,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",3)(7,"div",4)(8,"form",5),e.\u0275\u0275template(9,pt,2,1,"div",6),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275template(11,gt,1,4,"image-cropper",8),e.\u0275\u0275elementStart(12,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const a=e.\u0275\u0275reference(15);return e.\u0275\u0275resetView(a.click())}),e.\u0275\u0275text(13,"Select Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"input",10,11),e.\u0275\u0275listener("change",function(a){return t.onImagePicked(a)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,ut,8,2,"div",12),e.\u0275\u0275template(17,Ct,10,2,"div",12),e.\u0275\u0275template(18,_t,4,2,"div",12),e.\u0275\u0275template(19,yt,4,1,"div",12),e.\u0275\u0275elementStart(20,"div",13)(21,"p"),e.\u0275\u0275text(22,"Brands list"),e.\u0275\u0275elementStart(23,"span",14),e.\u0275\u0275text(24,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",15)(26,"mat-select",16),e.\u0275\u0275template(27,bt,2,2,"mat-option",17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"div",13)(29,"p"),e.\u0275\u0275text(30,"Materials list"),e.\u0275\u0275elementStart(31,"span",14),e.\u0275\u0275text(32,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"ul",18),e.\u0275\u0275template(34,Ot,4,1,"li",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",20),e.\u0275\u0275element(36,"input",21),e.\u0275\u0275elementStart(37,"button",22),e.\u0275\u0275listener("click",function(){return t.addItem("materials",t.newMaterial)}),e.\u0275\u0275element(38,"i",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(39,"div",13)(40,"p"),e.\u0275\u0275text(41,"Shapes list"),e.\u0275\u0275elementStart(42,"span",14),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"ul",18),e.\u0275\u0275template(45,Pt,4,1,"li",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",20),e.\u0275\u0275element(47,"input",24),e.\u0275\u0275elementStart(48,"button",22),e.\u0275\u0275listener("click",function(){return t.addItem("shapes",t.newShape)}),e.\u0275\u0275element(49,"i",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(50,"div",13)(51,"p"),e.\u0275\u0275text(52,"Extras list"),e.\u0275\u0275elementStart(53,"span",14),e.\u0275\u0275text(54,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"ul",18),e.\u0275\u0275template(56,Mt,4,1,"li",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"div",20),e.\u0275\u0275element(58,"input",25),e.\u0275\u0275elementStart(59,"button",22),e.\u0275\u0275listener("click",function(){return t.addItem("extras",t.newExtras)}),e.\u0275\u0275element(60,"i",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(61,St,2,1,"button",26),e.\u0275\u0275template(62,Et,2,1,"button",26),e.\u0275\u0275elementEnd()()()()}2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",t.isEditing?"Edit":"Add"," category"),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",t.categoryForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditing&&!t.categoryImage),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.imageChangedEvent),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.isEditing&&"category"===t.dialogName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","type"===t.dialogName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditing),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditing&&"type"===t.dialogName),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.brands),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.getControl("materials").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControl",t.newMaterial),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",t.getControl("shapes").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControl",t.newShape),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",t.getControl("extras").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControl",t.newExtras),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.isEditing),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditing))},dependencies:[p.sg,p.O5,u.ZT,u.xY,ct.gD,lt.ey,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.oH,d.sg,d.u,Q.ap,st.w],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:36px;gap:24px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:12px 0;gap:24px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:90%;gap:8px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0 6px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .list-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;column-gap:6px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .list-box[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px 8px;margin-bottom:4px;border-radius:12px;background-color:var(--accent);font-size:12px;gap:4px;cursor:pointer;transition:background-color .4s ease-in-out}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .list-box[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]:hover{background-color:var(--accent-click)}.edit-input[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid var(--grey);border-radius:6px}.edit-input[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;width:262px;border:0;outline:0}.edit-input[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:32px;height:32px}.edit-input[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{transition:background-color .4s ease-in-out}.edit-input[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]:hover{background-color:var(--accent)}.item-box[_ngcontent-%COMP%]{margin-bottom:6px}.item-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:4px}.item-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .buttons-box[_ngcontent-%COMP%]{display:flex;gap:4px}.btn-close[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px}.btn-accent[_ngcontent-%COMP%]{padding:16px 20px}h2[_ngcontent-%COMP%]{text-align:center;font-size:42px}h3[_ngcontent-%COMP%]{margin-bottom:8px}"]});var wt=l(77),It=l(1772);function Tt(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-category-card",9),e.\u0275\u0275listener("deletedCategoryId",function(r){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.deleteCategory(r))}),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("category",n.$implicit)("canEdit",!0)}function kt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"p"),e.\u0275\u0275text(2,"Categories"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",7),e.\u0275\u0275template(4,Tt,1,2,"app-category-card",8),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.categories)}}function Ft(i,n){1&i&&e.\u0275\u0275element(0,"app-type-card",12),2&i&&e.\u0275\u0275property("type",n.$implicit)("canEdit",!0)}function At(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6)(1,"p")(2,"span",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.goToCategories())}),e.\u0275\u0275text(3,"Categories"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",7),e.\u0275\u0275template(6,Ft,1,2,"app-type-card",11),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" >\xa0 ",t.title,""),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.types)}}class y{constructor(n,t,o,r,a,c){this.dialog=n,this.route=t,this.router=o,this.categoryService=r,this.brandService=a,this.capitalizeFirstLetter=c,this.categories=[],this.types=[],this.brands=[],this.categoryName="",this.title="",this.destroy$=new S.x}ngOnInit(){this.route.params.subscribe(n=>{this.categoryName=n.category,this.title=this.categoryName?this.capitalizeFirstLetter.transform(this.categoryName):"Categories"}),this.categoryName?this.categoryService.getCategoryByName(this.title).pipe((0,v.q)(1)).subscribe(n=>{this.types=n.data.type}):this.getCategories(),this.getBrands()}goToCategories(){this.router.navigate(["/admin/categories"])}getCategories(){this.categoryService.getAllCategories().pipe((0,f.R)(this.destroy$)).subscribe(n=>{n.data.forEach(t=>{const o=t.name.toLowerCase();t.id=t._id,delete t._id,t.link="/admin/categories/"+o}),this.categories=n.data})}getBrands(){this.brandService.getBrandsList().pipe((0,f.R)(this.destroy$)).subscribe(n=>{this.brands=n.data})}openBrandDialog(n){this.dialog.open(k,{width:"420px",data:{isEditing:n,brands:this.brands}}).afterClosed().pipe((0,v.q)(1)).subscribe(()=>{this.getCategories()})}deleteCategory(n){this.categories=this.categories.filter(t=>t.id!==n)}}function Bt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",19),e.\u0275\u0275element(1,"img",20),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.getControl("logo").value,e.\u0275\u0275sanitizeUrl)}}y.\u0275fac=function(n){return new(n||y)(e.\u0275\u0275directiveInject(u.uw),e.\u0275\u0275directiveInject(M.gz),e.\u0275\u0275directiveInject(M.F0),e.\u0275\u0275directiveInject(V.H),e.\u0275\u0275directiveInject(h),e.\u0275\u0275directiveInject(U.G))},y.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["app-admin-categories"]],features:[e.\u0275\u0275ProvidersFeature([U.G])],decls:11,vars:2,consts:[[1,"admin-container"],[1,"products-container"],[1,"products-header"],[1,"prod-buttons"],[1,"btn","btn-accent",3,"click"],["class","prod-section",4,"ngIf"],[1,"prod-section"],[1,"products-box"],[3,"category","canEdit","deletedCategoryId",4,"ngFor","ngForOf"],[3,"category","canEdit","deletedCategoryId"],[3,"click"],[3,"type","canEdit",4,"ngFor","ngForOf"],[3,"type","canEdit"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-side-bar"),e.\u0275\u0275elementStart(2,"div",1)(3,"div",2)(4,"h2"),e.\u0275\u0275text(5,"Categories"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",3)(7,"button",4),e.\u0275\u0275listener("click",function(){return t.openBrandDialog(!1)}),e.\u0275\u0275text(8,"Add Category"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,kt,5,1,"div",5),e.\u0275\u0275template(10,At,7,2,"div",5),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.categories&&t.categories.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.types&&t.types.length))},dependencies:[p.sg,p.O5,wt.$,It.a,C],styles:[".admin-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100vh;padding-top:70px;background:var(--light-grey)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{width:100%;overflow-y:scroll}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:24px;padding:18px;border-radius:6px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .prod-buttons[_ngcontent-%COMP%]{display:flex;gap:16px}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:24px;border-radius:6px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;margin:24px 24px 0;cursor:default}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:8px;color:var(--grey);cursor:pointer;text-decoration:underline;text-decoration-color:var(--white);transition:all .4s ease-in-out}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration-color:var(--grey)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   .products-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;margin:24px;gap:24px}.menu-container[_ngcontent-%COMP%]{top:172px;right:55px;z-index:12}"]});class b{constructor(n,t,o,r,a){this.fb=n,this.data=t,this.dialogRef=o,this.brandService=r,this.snack=a,this.imageChangedEvent="",this.currentYear=(new Date).getFullYear(),this.id="",this.dialogTitle="Add",this.isEditing=!1}ngOnInit(){this.initForm(),this.data.isEditing&&(this.isEditing=this.data.isEditing,this.dialogTitle="Edit",this.id=this.data.brand.id,this.getControl("name").setValue(this.data.brand.name),this.getControl("year").setValue(this.data.brand.year),this.getControl("country").setValue(this.data.brand.country),this.getControl("website").setValue(this.data.brand.website),this.getControl("logo").setValue(this.data.brand.logo))}initForm(){this.brandForm=this.fb.group({name:new d.NI("",d.kI.required),year:new d.NI(null,[d.kI.required,d.kI.max(this.currentYear)]),country:new d.NI("",d.kI.required),website:new d.NI("",d.kI.required),logo:new d.NI("",d.kI.required)})}getControl(n){return this.brandForm.get(n)}onImagePicked(n){this.imageChangedEvent=n}imageCropped(n){this.logo=this.base64ToFile(n.base64,this.imageChangedEvent?.target?.files[0].name)}base64ToFile(n,t){const o=n.split(","),r=o[0].match(/:(.*?);/)[1],a=atob(o[1]);let c=a.length,s=new Uint8Array(c);for(;c--;)s[c]=a.charCodeAt(c);return new File([s],t,{type:r})}loadImageFailed(){this.snack.openSnackBar("Load image is filed","error")}addBrand(){this.brandService.postBrand(this.brandForm.value,this.logo).pipe().subscribe(t=>{this.dialogRef.close(),this.snack.openSnackBar("Brand was added!","success")})}updateBrand(){this.logo&&this.getControl("logo").setValue(this.logo),this.brandService.updateBrand(this.id,this.brandForm.value).subscribe(n=>{this.dialogRef.close(),this.snack.openSnackBar("Brand was updated!","success")})}}function Nt(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.openEditBrand())}),e.\u0275\u0275element(2,"i",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.deleteBrand())}),e.\u0275\u0275element(4,"i",14),e.\u0275\u0275elementEnd()()}}b.\u0275fac=function(n){return new(n||b)(e.\u0275\u0275directiveInject(d.qu),e.\u0275\u0275directiveInject(u.WI),e.\u0275\u0275directiveInject(u.so),e.\u0275\u0275directiveInject(h),e.\u0275\u0275directiveInject(B.c))},b.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["app-add-edit-brand-dialog"]],decls:42,vars:10,consts:[[1,"dialog-container"],["mat-dialog-close","",1,"btn-close"],[1,"fa-solid","fa-xmark"],["mat-dialog-content","",1,"dialog-body"],[1,"form",3,"formGroup"],["class","img-preview",4,"ngIf"],[1,"prod-image-box"],[1,"prod-description-box"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToHeight","resizeToWidth","imageCropped","loadImageFailed"],[1,"btn","btn-line",3,"click"],["formControlName","logo","type","file","hidden","",3,"change"],["filePicker",""],[1,"label"],[1,"error-color"],["formControlName","name","placeholder","Enter name of brand","required","",1,"input","input-accent-lined","width-100"],["formControlName","year","type","number","placeholder","Enter year of foundation","required","",1,"input","input-accent-lined","width-100"],["formControlName","country","placeholder","Enter brand country","required","",1,"input","input-accent-lined","width-100"],["formControlName","website","placeholder","Enter link to brand website","required","",1,"input","input-accent-lined","width-100"],[1,"btn","btn-accent","width-100",3,"disabled","click"],[1,"img-preview"],[3,"src"]],template:function(n,t){if(1&n){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",1),e.\u0275\u0275element(5,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",3)(7,"form",4),e.\u0275\u0275template(8,Bt,2,1,"div",5),e.\u0275\u0275element(9,"div",6),e.\u0275\u0275elementStart(10,"div",7)(11,"image-cropper",8),e.\u0275\u0275listener("imageCropped",function(a){return t.imageCropped(a)})("loadImageFailed",function(){return t.loadImageFailed()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const a=e.\u0275\u0275reference(15);return e.\u0275\u0275resetView(a.click())}),e.\u0275\u0275text(13,"Select Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"input",10,11),e.\u0275\u0275listener("change",function(a){return t.onImagePicked(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div")(17,"label",12),e.\u0275\u0275text(18,"Brand name"),e.\u0275\u0275elementStart(19,"span",13),e.\u0275\u0275text(20,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(21,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div")(23,"label",12),e.\u0275\u0275text(24,"Year of foundation"),e.\u0275\u0275elementStart(25,"span",13),e.\u0275\u0275text(26,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(27,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div")(29,"label",12),e.\u0275\u0275text(30,"Country"),e.\u0275\u0275elementStart(31,"span",13),e.\u0275\u0275text(32,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(33,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div")(35,"label",12),e.\u0275\u0275text(36,"Website"),e.\u0275\u0275elementStart(37,"span",13),e.\u0275\u0275text(38,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(39,"input",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"button",18),e.\u0275\u0275listener("click",function(){return t.isEditing?t.updateBrand():t.addBrand()}),e.\u0275\u0275text(41),e.\u0275\u0275elementEnd()()()()}2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",t.dialogTitle," Brand"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.brandForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditing),e.\u0275\u0275advance(3),e.\u0275\u0275property("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToHeight",300)("resizeToWidth",300),e.\u0275\u0275advance(29),e.\u0275\u0275property("disabled",t.brandForm.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.dialogTitle," brand"))},dependencies:[p.O5,u.ZT,u.xY,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.Q7,d.sg,d.u,Q.ap],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:36px;gap:24px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.btn-close[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px}h2[_ngcontent-%COMP%]{text-align:center;font-size:42px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.form[_ngcontent-%COMP%]   .prod-description-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:12px}.img-preview[_ngcontent-%COMP%]{height:300px;width:300px}.img-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}"]});class F{constructor(n,t,o){this.dialog=n,this.brandService=t,this.snack=o,this.canEdit=!1}openEditBrand(){this.dialog.open(b,{width:"480px",data:{brand:this.brand,isEditing:!0}})}deleteBrand(){this.brand.id&&this.brandService.deleteBrand(this.brand.id).pipe((0,v.q)(1)).subscribe(n=>{this.snack.openSnackBar(n.message,"success")})}}function Vt(i,n){1&i&&e.\u0275\u0275element(0,"app-brand-card",9),2&i&&e.\u0275\u0275property("brand",n.$implicit)("canEdit",!0)}function Dt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",7),e.\u0275\u0275template(4,Vt,1,2,"app-brand-card",8),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("You added ",t.totalElements," brands"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.brands)}}F.\u0275fac=function(n){return new(n||F)(e.\u0275\u0275directiveInject(u.uw),e.\u0275\u0275directiveInject(h),e.\u0275\u0275directiveInject(B.c))},F.\u0275cmp=e.\u0275\u0275defineComponent({type:F,selectors:[["app-brand-card"]],inputs:{brand:"brand",canEdit:"canEdit"},decls:15,vars:7,consts:[[1,"card-container"],[1,"card-image"],[1,"brand-year"],["class","button-icon-box",4,"ngIf"],[1,"img",3,"src","alt"],[1,"card-box"],[1,"card-text"],[1,"brand"],[1,"name"],["target","_blank",1,"red-text",3,"href"],[1,"button-icon-box"],[1,"btn-icon","btn-icon-white",3,"click"],[1,"fa-regular","fa-pen-to-square"],[1,"btn-icon","btn-icon-danger",3,"click"],[1,"fa-solid","fa-xmark"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,Nt,5,0,"div",3),e.\u0275\u0275element(6,"img",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",5)(8,"div",6)(9,"h4",7),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"p",8),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"a",9),e.\u0275\u0275text(14,"website"),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.brand.year),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.canEdit),e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.brand.logo,e.\u0275\u0275sanitizeUrl)("alt",t.brand.name+" logo"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.brand.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.brand.country),e.\u0275\u0275advance(1),e.\u0275\u0275property("href",t.brand.website,e.\u0275\u0275sanitizeUrl))},dependencies:[p.O5],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;max-width:290px;border-radius:6px;background:var(--light-grey);outline:2px solid var(--light-grey);cursor:pointer;transition:all .4s ease-in-out}.card-container[_ngcontent-%COMP%]:hover{box-shadow:6px 6px 6px #0003}.card-container[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{position:relative;border-radius:6px 6px 0 0;width:290px}.card-container[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{border-radius:6px 6px 0 0;max-width:290px}.card-container[_ngcontent-%COMP%]   .card-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:24px}.card-container[_ngcontent-%COMP%]   .card-box[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px}.card-container[_ngcontent-%COMP%]   .card-box[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.card-container[_ngcontent-%COMP%]   .card-box[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px}.brand-year[_ngcontent-%COMP%]{display:flex;position:absolute;top:16px}.brand-year[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding:10px;background-color:var(--light-grey);border-radius:0 16px 16px 0}.button-icon-box[_ngcontent-%COMP%]{display:flex;position:absolute;top:16px;right:16px;gap:4px}@media only screen and (max-width: 1600px){.card-box[_ngcontent-%COMP%]{max-width:260px}.card-box[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{width:260px}.card-box[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{max-width:260px}}"]});class A{constructor(n,t){this.dialog=n,this.brandService=t,this.brands=[],this.totalElements=0,this.page=1,this.pageSize=6,this.destroy$=new S.x}ngOnInit(){this.getBrands()}getBrands(){this.brandService.getAllBrands(this.page,this.pageSize).pipe((0,f.R)(this.destroy$)).subscribe(n=>{const t=n.data.map(o=>({...o,id:o._id})).map(({_id:o,...r})=>r);this.brands=t,this.totalElements=n.totalElements})}openBrandDialog(n){this.dialog.open(b,{width:"420px",data:{isEditing:n}})}}A.\u0275fac=function(n){return new(n||A)(e.\u0275\u0275directiveInject(u.uw),e.\u0275\u0275directiveInject(h))},A.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["app-admin-brands"]],decls:10,vars:1,consts:[[1,"admin-container"],[1,"products-container"],[1,"products-header"],[1,"prod-buttons"],[1,"btn","btn-accent",3,"click"],["class","prod-section",4,"ngIf"],[1,"prod-section"],[1,"products-box"],[3,"brand","canEdit",4,"ngFor","ngForOf"],[3,"brand","canEdit"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-side-bar"),e.\u0275\u0275elementStart(2,"div",1)(3,"div",2)(4,"h2"),e.\u0275\u0275text(5,"Brands"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",3)(7,"button",4),e.\u0275\u0275listener("click",function(){return t.openBrandDialog(!1)}),e.\u0275\u0275text(8,"Add Brand"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,Dt,5,2,"div",5),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.brands))},dependencies:[p.sg,p.O5,F,C],styles:[".admin-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100vh;padding-top:70px;background:var(--light-grey)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{width:100%;overflow-y:scroll}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:24px;padding:18px;border-radius:6px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .prod-buttons[_ngcontent-%COMP%]{display:flex;gap:16px}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:24px;border-radius:6px;background-color:var(--white)}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;margin:24px 24px 0}.admin-container[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .prod-section[_ngcontent-%COMP%]   .products-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;margin:24px;gap:24px}.menu-container[_ngcontent-%COMP%]{top:172px;right:55px;z-index:12}"]});const jt=[{path:"",component:w},{path:"categories",component:y},{path:"categories/:category",component:y},{path:"brands",component:A},{path:"users",component:T}];class O{}O.\u0275fac=function(n){return new(n||O)},O.\u0275mod=e.\u0275\u0275defineNgModule({type:O}),O.\u0275inj=e.\u0275\u0275defineInjector({imports:[M.Bz.forChild(jt),M.Bz]});class P{}P.\u0275fac=function(n){return new(n||P)},P.\u0275mod=e.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.ez,O,ne.S,te.m,Re]})}}]);