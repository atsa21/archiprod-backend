"use strict";(self.webpackChunkarchiprod=self.webpackChunkarchiprod||[]).push([[969],{2350:(S,C,d)=>{d.d(C,{A:()=>b});var t=d(4006),g=d(5938),x=d(5698),e=d(4650),P=d(3639),r=d(2419),a=d(2660),o=d(6895),_=d(1948),O=d(7314),f=d(4385),u=d(3238),p=d(5631);function m(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"div",49),e.\u0275\u0275element(1,"img",50),e.\u0275\u0275elementEnd()),2&l){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("src",n.getControl("image").value,e.\u0275\u0275sanitizeUrl)}}function E(l,i){if(1&l){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"image-cropper",51),e.\u0275\u0275listener("imageCropped",function(c){e.\u0275\u0275restoreView(n);const h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.imageCropped(c))})("loadImageFailed",function(){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.loadImageFailed())}),e.\u0275\u0275elementEnd()}if(2&l){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToHeight",980)("resizeToWidth",980)}}function v(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.name)}}function w(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n.typeName),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.typeName)}}function D(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n)}}function T(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n)}}function N(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n)}}function k(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"div",55)(1,"div")(2,"label",12),e.\u0275\u0275text(3,"Discounted: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",13),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div")(7,"label",12),e.\u0275\u0275text(8,"Final price: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"span",13),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()()),2&l){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",n.getControl("price.discount").value,"%"),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate2("",n.getDescountedPrice(n.getControl("price.discount").value)," ",n.getControl("price.currency").value,"")}}function A(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-slider",52),e.\u0275\u0275element(2,"input",53),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,k,11,3,"div",54),e.\u0275\u0275elementEnd()),2&l){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("max",95)("min",5)("step",5)("discrete",!1)("showTickMarks",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.getControl("price.discount").value)}}function U(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n)}}function F(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n)}}function V(l,i){if(1&l&&(e.\u0275\u0275elementStart(0,"mat-option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const n=i.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n)}}const I=function(l){return{"disabled-select":l}};class b{constructor(i,n,s,c,h,y){this.fb=i,this.prodService=n,this.categoryService=s,this.data=c,this.dialogRef=h,this.snack=y,this.types=[],this.brands=[],this.materials=[],this.shapes=[],this.extras=[],this.currencies=["Euro","Dollar","Pound"],this.units=["mm","cm"],this.imageChangedEvent="",this.editImage="",this.dialogTitle="Add",this.actionBtn="Submit",this.isEditing=!1,this.id=""}ngOnInit(){if(this.initForm(),this.data&&(this.isEditing=this.data.isEditing,this.categories=this.data.categories,this.isEditing)){this.dialogTitle="Edit";const i=this.data.product;this.getControl("category").setValue(i.category),this.getControl("type").setValue(i.type),this.getControl("image").setValue(i.imagePath),this.getControl("brand").setValue(i.brand),this.getControl("dimensions.height").setValue(i.dimensions.height),this.getControl("dimensions.width").setValue(i.dimensions.width),this.getControl("dimensions.depth").setValue(i.dimensions.depth),this.getControl("dimensions.diameter").setValue(i.dimensions.diameter),this.getControl("dimensions.measurementUnits").setValue(i.dimensions.measurementUnits),this.getControl("price.fullPrice").setValue(i.price.fullPrice),this.getControl("price.currency").setValue(i.price.currency),this.getControl("price.isOnSale").setValue(i.price.isOnSale),this.getControl("price.discount").setValue(i.price.discount),this.getControl("details.collectionName").setValue(i.details.collectionName),this.getControl("details.shape").setValue(this.data.product.details.shape),this.getControl("details.materials").setValue(this.data.product.details.materials),this.getControl("details.extras").setValue(this.data.product.details.extras),this.getControl("details.productCode").setValue(i.details.productCode),i.details.year&&this.getControl("details.year").setValue(i.details.year),this.getControl("inStock").setValue(i.inStock),this.id=i.id}}initForm(){this.prodForm=this.fb.group({category:new t.NI("",t.kI.required),type:new t.NI({value:"",disabled:!0},[t.kI.required,t.kI.minLength(2),t.kI.maxLength(70)]),image:new t.NI(null,t.kI.required),brand:new t.NI({value:"",disabled:!0},t.kI.required),dimensions:this.fb.group({height:new t.NI(null,t.kI.required),width:new t.NI(null),depth:new t.NI(null),diameter:new t.NI(null),measurementUnits:new t.NI("mm",t.kI.required)}),price:this.fb.group({fullPrice:new t.NI(null,t.kI.required),currency:new t.NI("Euro",t.kI.required),isOnSale:new t.NI(!1,t.kI.required),discount:new t.NI(null),discountedPrice:new t.NI(null)}),details:this.fb.group({collectionName:new t.NI("",t.kI.required),shape:new t.NI({value:"",disabled:!0},t.kI.required),materials:new t.NI({value:[],disabled:!0},t.kI.required),extras:new t.NI({value:[],disabled:!0},t.kI.required),productCode:new t.NI("",t.kI.required),year:new t.NI(null)}),inStock:new t.NI(null,t.kI.required)}),this.getControl("category").valueChanges.subscribe(i=>{i&&(this.getCategoryTypes(i),this.resetDetails())}),this.getControl("type").valueChanges.subscribe(i=>{i&&this.getArraysByType(i)})}getControl(i){return this.prodForm.get(i)}resetDetails(){this.getControl("brand").setValue(""),this.getControl("details.shape").setValue(""),this.getControl("details.materials").setValue([]),this.getControl("details.extras").setValue([]),this.getControl("brand").disable(),this.getControl("details.shape").disable(),this.getControl("details.materials").disable(),this.getControl("details.extras").disable()}getCategoryTypes(i){const s=this.categories.find(c=>c.name===i)?.id;"string"==typeof s&&this.categoryService.getCategoryById(s).pipe((0,x.q)(1)).subscribe(c=>{this.types=c.data.type,this.getControl("type").enable()})}getArraysByType(i){const s=this.types.filter(c=>c.typeName===i)[0];s&&(this.brands=s.brands,this.materials=s.materials,this.shapes=s.shapes,this.extras=s.extras,this.getControl("brand").enable(),this.getControl("details.shape").enable(),this.getControl("details.materials").enable(),this.getControl("details.extras").enable())}getDescountedPrice(i){const n=this.getControl("price.fullPrice").value,c=Math.round(n-n/100*i);return this.getControl("price.discountedPrice").setValue(c),c}onImagePicked(i){this.imageChangedEvent=i,this.getControl("image").setValue(this.imageChangedEvent)}imageCropped(i){this.prodImage=this.base64ToFile(i.base64,this.imageChangedEvent?.target?.files[0].name)}base64ToFile(i,n){const s=i.split(","),c=s[0].match(/:(.*?);/)[1],h=atob(s[1]);let y=h.length,M=new Uint8Array(y);for(;y--;)M[y]=h.charCodeAt(y);return new File([M],n,{type:c})}loadImageFailed(){this.snack.openSnackBar("Load image is filed","error")}addProduct(){this.prodService.postProduct(this.prodForm.value,this.prodImage).pipe().subscribe(n=>{this.dialogRef.close(),this.snack.openSnackBar("Product was added!","success")})}updateProduct(){this.prodImage&&this.getControl("image").setValue(this.prodImage),this.prodService.updateProduct(this.id,this.prodForm.value).subscribe(i=>{this.dialogRef.close(),this.snack.openSnackBar("Product was updated!","success")})}}b.\u0275fac=function(i){return new(i||b)(e.\u0275\u0275directiveInject(t.qu),e.\u0275\u0275directiveInject(P.M),e.\u0275\u0275directiveInject(r.H),e.\u0275\u0275directiveInject(g.WI),e.\u0275\u0275directiveInject(g.so),e.\u0275\u0275directiveInject(a.c))},b.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["app-add-edit-prod-dialog"]],decls:150,vars:26,consts:[[1,"dialog-container"],["mat-dialog-close","",1,"btn-close"],[1,"fa-solid","fa-xmark"],["mat-dialog-content","",1,"dialog-body"],[1,"form",3,"formGroup"],["class","img-preview",4,"ngIf"],[1,"prod-image-box","width-100"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToHeight","resizeToWidth","imageCropped","loadImageFailed",4,"ngIf"],[1,"btn","btn-line","width-100",3,"click"],["type","file","hidden","",3,"change"],["filePicker",""],[1,"prod-description-box"],[1,"label"],[1,"error-color"],[1,"input","input-accent-lined","width-100"],["formControlName","category","placeholder","Select category*"],[3,"value",4,"ngFor","ngForOf"],[1,"input","input-accent-lined","width-100",3,"ngClass"],["formControlName","type","placeholder","Select type*"],["formControlName","brand","placeholder","Select brand*"],["formGroupName","dimensions",1,"dimensions","width-100"],[1,"dimensions-inputs"],[1,"height"],["formControlName","height","type","number","placeholder","0",1,"input","input-accent-lined","width-100"],[1,"units"],[1,"input","input-accent-lined"],["formControlName","measurementUnits","placeholder","Select units*"],[1,"dimensions-inputs","width-100"],["formControlName","width","type","number","placeholder","0",1,"input","input-accent-lined","width-100"],["formControlName","depth","type","number","placeholder","0",1,"input","input-accent-lined","width-100"],["formControlName","diameter","type","number","placeholder","0",1,"input","input-accent-lined","width-100"],["formGroupName","price",1,"price-container","width-100"],[1,"price-box"],[1,"price-amount"],["formControlName","fullPrice","type","number","placeholder","0",1,"input","input-accent-lined"],[1,"currency-box"],["formControlName","currency","placeholder","Select currency*"],["aria-labelledby","example-radio-group-label","formControlName","isOnSale",1,"example-radio-group"],[3,"value"],[4,"ngIf"],["formGroupName","details",1,"width-100"],["formControlName","collectionName","placeholder","Enter collection name*",1,"input","input-accent-lined","width-100"],["formControlName","shape","placeholder","Select shape*"],["formControlName","materials","multiple","","placeholder","Select materials*"],["formControlName","extras","multiple","","placeholder","Select extras*"],["formControlName","year","type","number","placeholder","0",1,"input","input-accent-lined","width-100"],["formControlName","productCode","placeholder","Enter product code",1,"input","input-accent-lined","width-100"],["formControlName","inStock","type","number","placeholder","0",1,"input","input-accent-lined","width-100"],[1,"btn","btn-accent",3,"disabled","click"],[1,"img-preview"],[3,"src"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToHeight","resizeToWidth","imageCropped","loadImageFailed"],["color","accent",3,"max","min","step","discrete","showTickMarks"],["matSliderThumb","","formControlName","discount"],["class","discount-box",4,"ngIf"],[1,"discount-box"]],template:function(i,n){if(1&i){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",1),e.\u0275\u0275element(5,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",3)(7,"form",4),e.\u0275\u0275template(8,m,2,1,"div",5),e.\u0275\u0275elementStart(9,"div",6),e.\u0275\u0275template(10,E,1,5,"image-cropper",7),e.\u0275\u0275elementStart(11,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const h=e.\u0275\u0275reference(14);return e.\u0275\u0275resetView(h.click())}),e.\u0275\u0275text(12,"Select Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"input",9,10),e.\u0275\u0275listener("change",function(h){return n.onImagePicked(h)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",11)(16,"div")(17,"label",12),e.\u0275\u0275text(18,"Category"),e.\u0275\u0275elementStart(19,"span",13),e.\u0275\u0275text(20,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",14)(22,"mat-select",15),e.\u0275\u0275template(23,v,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"div")(25,"label",12),e.\u0275\u0275text(26,"Type"),e.\u0275\u0275elementStart(27,"span",13),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",17)(30,"mat-select",18),e.\u0275\u0275template(31,w,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(32,"div")(33,"label",12),e.\u0275\u0275text(34,"Brand"),e.\u0275\u0275elementStart(35,"span",13),e.\u0275\u0275text(36,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",14)(38,"mat-select",19),e.\u0275\u0275template(39,D,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(40,"div",20)(41,"h3"),e.\u0275\u0275text(42,"Dimensions"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"div",21)(44,"div",22)(45,"label",12),e.\u0275\u0275text(46,"Height"),e.\u0275\u0275elementStart(47,"span",13),e.\u0275\u0275text(48,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(49,"input",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",24)(51,"label",12),e.\u0275\u0275text(52,"Units"),e.\u0275\u0275elementStart(53,"span",13),e.\u0275\u0275text(54,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"div",25)(56,"mat-select",26),e.\u0275\u0275template(57,T,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(58,"div",27)(59,"div")(60,"label",12),e.\u0275\u0275text(61,"Width"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(62,"input",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"div")(64,"label",12),e.\u0275\u0275text(65,"Depth"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(66,"input",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(67,"div")(68,"label",12),e.\u0275\u0275text(69,"Diameter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(70,"input",30),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(71,"div",31)(72,"div")(73,"h3"),e.\u0275\u0275text(74,"Price"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"div",32)(76,"div",33)(77,"label",12),e.\u0275\u0275text(78,"Full price"),e.\u0275\u0275elementStart(79,"span",13),e.\u0275\u0275text(80,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(81,"input",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"div",35)(83,"label",12),e.\u0275\u0275text(84,"Currency"),e.\u0275\u0275elementStart(85,"span",13),e.\u0275\u0275text(86,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(87,"div",25)(88,"mat-select",36),e.\u0275\u0275template(89,N,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(90,"div")(91,"h3"),e.\u0275\u0275text(92,"Is it on sale?"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(93,"mat-radio-group",37)(94,"mat-radio-button",38),e.\u0275\u0275text(95,"Yes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"mat-radio-button",38),e.\u0275\u0275text(97,"No"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(98,A,4,6,"div",39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(99,"div",40)(100,"h3"),e.\u0275\u0275text(101,"Product details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"div")(103,"label",12),e.\u0275\u0275text(104,"Collection name"),e.\u0275\u0275elementStart(105,"span",13),e.\u0275\u0275text(106,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(107,"input",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(108,"div")(109,"label",12),e.\u0275\u0275text(110,"Shape"),e.\u0275\u0275elementStart(111,"span",13),e.\u0275\u0275text(112,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(113,"div",14)(114,"mat-select",42),e.\u0275\u0275template(115,U,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(116,"div")(117,"label",12),e.\u0275\u0275text(118,"Materials"),e.\u0275\u0275elementStart(119,"span",13),e.\u0275\u0275text(120,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(121,"div",17)(122,"mat-select",43),e.\u0275\u0275template(123,F,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(124,"div")(125,"label",12),e.\u0275\u0275text(126,"Extras"),e.\u0275\u0275elementStart(127,"span",13),e.\u0275\u0275text(128,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(129,"div",17)(130,"mat-select",44),e.\u0275\u0275template(131,V,2,2,"mat-option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(132,"div")(133,"label",12),e.\u0275\u0275text(134,"Manufacture year"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(135,"input",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(136,"div")(137,"label",12),e.\u0275\u0275text(138,"Product code"),e.\u0275\u0275elementStart(139,"span",13),e.\u0275\u0275text(140,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(141,"input",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(142,"div")(143,"label",12),e.\u0275\u0275text(144,"In stock"),e.\u0275\u0275elementStart(145,"span",13),e.\u0275\u0275text(146,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(147,"input",47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(148,"button",48),e.\u0275\u0275listener("click",function(){return n.isEditing?n.updateProduct():n.addProduct()}),e.\u0275\u0275text(149),e.\u0275\u0275elementEnd()()()()}2&i&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",n.dialogTitle," Product"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",n.prodForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isEditing&&!n.prodImage),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.imageChangedEvent),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngForOf",n.categories),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(20,I,!n.types.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.types),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",n.brands),e.\u0275\u0275advance(18),e.\u0275\u0275property("ngForOf",n.units),e.\u0275\u0275advance(32),e.\u0275\u0275property("ngForOf",n.currencies),e.\u0275\u0275advance(5),e.\u0275\u0275property("value",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.getControl("price.isOnSale").value),e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",n.shapes),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(22,I,!n.materials.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.materials),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(24,I,!n.extras.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.extras),e.\u0275\u0275advance(17),e.\u0275\u0275property("disabled",!n.prodForm.valid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",n.isEditing?"Edit":"Add"," product"))},dependencies:[o.mk,o.sg,o.O5,g.ZT,g.xY,_.VQ,_.U0,O.pH,O.$5,f.gD,u.ey,t._Y,t.Fj,t.wV,t.JJ,t.JL,t.sg,t.u,t.x0,p.ap],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:36px;gap:24px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;gap:12px}.dialog-container[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .add-container[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100%}.dimensions[_ngcontent-%COMP%]   .dimensions-inputs[_ngcontent-%COMP%]{display:flex;width:100%;column-gap:12px}.dimensions[_ngcontent-%COMP%]   .dimensions-inputs[_ngcontent-%COMP%]   .height[_ngcontent-%COMP%]{width:100%}.dimensions[_ngcontent-%COMP%]   .dimensions-inputs[_ngcontent-%COMP%]   .units[_ngcontent-%COMP%]{min-width:106px}.price-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.discount-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px}.btn-close[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px}h2[_ngcontent-%COMP%]{text-align:center;font-size:42px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.form[_ngcontent-%COMP%]   .prod-description-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:16px}.form[_ngcontent-%COMP%]   .prod-description-box[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;gap:12px}.form[_ngcontent-%COMP%]   .prod-description-box[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{max-width:220px}.form[_ngcontent-%COMP%]   .prod-description-box[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]   .currency-box[_ngcontent-%COMP%]{max-width:120px;width:120px}.img-preview[_ngcontent-%COMP%]{height:300px;width:300px}.img-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}"]})},77:(S,C,d)=>{d.d(C,{$:()=>f});var t=d(4650),g=d(5698),x=d(3456),e=d(2419),P=d(2660),r=d(6895);function a(u,p){if(1&u){const m=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10)(1,"button",11),t.\u0275\u0275element(2,"i",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(m);const v=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(v.deleteCategory())}),t.\u0275\u0275element(4,"i",14),t.\u0275\u0275elementEnd()()}}function o(u,p){if(1&u&&(t.\u0275\u0275elementStart(0,"p",15),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&u){const m=p.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(m.typeName)}}function _(u,p){1&u&&(t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275text(1,"Add type"),t.\u0275\u0275elementEnd())}function O(u,p){if(1&u){const m=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"h3",3),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,a,5,0,"div",4),t.\u0275\u0275elementStart(5,"img",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(m);const v=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(v.goToPage(v.category.link))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",6)(7,"div",7),t.\u0275\u0275template(8,o,2,1,"p",8),t.\u0275\u0275template(9,_,2,0,"button",9),t.\u0275\u0275elementEnd()()()}if(2&u){const m=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(m.category.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",m.canEdit),t.\u0275\u0275advance(1),t.\u0275\u0275property("src",m.category.image,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",m.category.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",m.canEdit)}}class f{constructor(p,m,E){this.router=p,this.categoryService=m,this.snack=E,this.canEdit=!1,this.deletedCategoryId=new t.EventEmitter}goToPage(p){this.router.navigate([p])}deleteCategory(){this.category.id&&this.categoryService.deleteCategory(this.category.id).pipe((0,g.q)(1)).subscribe(p=>{this.snack.openSnackBar(p.message,"success"),this.deletedCategoryId.emit(this.category.id)})}}f.\u0275fac=function(p){return new(p||f)(t.\u0275\u0275directiveInject(x.F0),t.\u0275\u0275directiveInject(e.H),t.\u0275\u0275directiveInject(P.c))},f.\u0275cmp=t.\u0275\u0275defineComponent({type:f,selectors:[["app-category-card"]],inputs:{category:"category",canEdit:"canEdit"},outputs:{deletedCategoryId:"deletedCategoryId"},decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],[1,"card-image"],[1,"name"],["class","button-icon-box",4,"ngIf"],["alt","image",1,"img",3,"src","click"],[1,"card-box"],[1,"card-text"],["class","type",4,"ngFor","ngForOf"],["class","btn btn-s btn-add",4,"ngIf"],[1,"button-icon-box"],[1,"btn-icon","btn-icon-white"],[1,"fa-regular","fa-pen-to-square"],[1,"btn-icon","btn-icon-danger",3,"click"],[1,"fa-solid","fa-xmark"],[1,"type"],[1,"btn","btn-s","btn-add"]],template:function(p,m){1&p&&t.\u0275\u0275template(0,O,10,5,"div",0),2&p&&t.\u0275\u0275property("ngIf",m.category)},dependencies:[r.sg,r.O5],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;max-width:260px;height:480px;border-radius:6px;background:var(--light-grey);outline:2px solid var(--light-grey);cursor:pointer;transition:all .4s ease-in-out}.card-container[_ngcontent-%COMP%]:hover{box-shadow:6px 6px 6px #0003}.card-container[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;width:260px;border-radius:6px 6px 0 0}.card-container[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{position:absolute;font-size:18px;top:12px;padding:4px 12px;background-color:var(--white);border-radius:0 24px 24px 0}.card-container[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{border-radius:6px 6px 0 0;max-width:260px}.card-container[_ngcontent-%COMP%]   .card-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:260px;gap:12px;padding:24px}.card-container[_ngcontent-%COMP%]   .card-box[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px}.card-container[_ngcontent-%COMP%]   .card-box[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:16px}.btn-add[_ngcontent-%COMP%]{background-color:var(--accent)}.btn-add[_ngcontent-%COMP%]:hover{box-shadow:none;background-color:var(--accent-click)}.button-icon-box[_ngcontent-%COMP%]{display:flex;position:absolute;top:12px;right:12px;gap:4px}@media only screen and (max-width: 1600px){.card-container[_ngcontent-%COMP%]{max-width:220px;height:400px}.card-container[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{width:220px}.card-container[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{max-width:220px}}"]})},5191:(S,C,d)=>{d.d(C,{H:()=>g});var t=d(4650);class g{transform(e){switch(e){case"Euro":return"\u20ac";case"Dollar":default:return"$";case"Pound":return"\xa3"}}}g.\u0275fac=function(e){return new(e||g)},g.\u0275pipe=t.\u0275\u0275definePipe({name:"currency",type:g,pure:!0})},3639:(S,C,d)=>{d.d(C,{M:()=>e});var t=d(2340),g=d(4650),x=d(529);class e{constructor(r){this.http=r,this.mainUrl=t.N.apiUrl+"/products"}getProducts(r,a){return this.http.get(`${this.mainUrl}?size=${a}&page=${r}`)}getProductsOnSale(r,a,o){return this.http.get(`${this.mainUrl}/isOnSale?size=${a}&page=${r}&isOnSale=${o}`)}postProduct(r,a){const o=new FormData;return o.append("category",r.category),o.append("type",r.type),o.append("image",a,r.type),o.append("brand",r.brand),o.append("height",r.dimensions.height.toString()),r.dimensions.width&&o.append("width",r.dimensions.width.toString()),r.dimensions.depth&&o.append("depth",r.dimensions.depth.toString()),r.dimensions.diameter&&o.append("diameter",r.dimensions.diameter.toString()),o.append("measurementUnits",r.dimensions.measurementUnits),o.append("fullPrice",r.price.fullPrice.toString()),o.append("currency",r.price.currency),o.append("isOnSale",r.price.isOnSale.toString()),r.price.discount&&o.append("discount",r.price.discount.toString()),r.price.discountedPrice&&o.append("discountedPrice",r.price.discountedPrice.toString()),o.append("collectionName",r.details.collectionName),o.append("shape",r.details.shape),r.details.materials.forEach(_=>{o.append("materials",_)}),r.details.extras.forEach(_=>{o.append("extras",_)}),r.details.productCode&&o.append("productCode",r.details.productCode),r.details.year&&o.append("year",r.details.year.toString()),o.append("inStock",r.inStock.toString()),this.http.post(this.mainUrl,o)}updateProduct(r,a){let o;return"object"==typeof a.image?(o=new FormData,o.append("id",r),o.append("category",a.category),o.append("type",a.type),o.append("image",a.image,a.type),o.append("brand",a.brand),o.append("height",a.dimensions.height.toString()),a.dimensions.width&&o.append("width",a.dimensions.width.toString()),a.dimensions.depth&&o.append("depth",a.dimensions.depth.toString()),a.dimensions.diameter&&o.append("diameter",a.dimensions.diameter.toString()),o.append("measurementUnits",a.dimensions.measurementUnits),o.append("fullPrice",a.price.fullPrice.toString()),o.append("currency",a.price.currency),o.append("isOnSale",a.price.isOnSale.toString()),a.price.discount&&o.append("discount",a.price.discount.toString()),a.price.discountedPrice&&o.append("discountedPrice",a.price.discountedPrice.toString()),o.append("collectionName",a.details.collectionName),o.append("shape",a.details.shape),a.details.materials.forEach(_=>{o.append("materials",_)}),a.details.extras.forEach(_=>{o.append("extras",_)}),a.details.productCode&&o.append("productCode",a.details.productCode),a.details.year&&o.append("year",a.details.year.toString()),o.append("inStock",a.inStock.toString())):o={id:r,category:a.category,type:a.type,imagePath:a.image,brand:a.brand,height:a.dimensions.height,width:a.dimensions.width,depth:a.dimensions.depth,diameter:a.dimensions.diameter,measurementUnits:a.dimensions.measurementUnits,fullPrice:a.price.fullPrice,currency:a.price.currency,isOnSale:a.price.isOnSale,discount:a.price.discount,discountedPrice:a.price.discountedPrice,collectionName:a.details.collectionName,shape:a.details.shape,materials:a.details.materials,extras:a.details.extras,productCode:a.details.productCode,year:a.details.year,inStock:a.inStock},this.http.put(`${this.mainUrl}/${r}`,o)}deleteProduct(r){return this.http.delete(`${this.mainUrl}/${r}`)}}e.\u0275fac=function(r){return new(r||e)(g.\u0275\u0275inject(x.eN))},e.\u0275prov=g.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}]);